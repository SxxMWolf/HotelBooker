# 🏨 호텔 예약 시스템 기획서

## 프로젝트 개요

**HotelBooker**는 호텔 운영에 필요한 모든 기능을 제공하는 통합 예약 관리 시스템입니다. 사용자 예약부터 관리자 대시보드까지, 호텔 운영의 전 과정을 디지털화했습니다.

### 프로젝트 배경

현대 호텔 업계는 디지털 전환의 필요성이 증가하고 있습니다. 기존의 수기 기반 예약 관리 시스템은 다음과 같은 문제점을 가지고 있습니다:

- **수동 처리의 비효율성**: 전화나 이메일 기반 예약은 처리 시간이 길고 오류 발생 가능성이 높음
- **데이터 관리의 어려움**: 예약 정보, 객실 상태, 결제 내역이 분산되어 있어 통합 관리가 어려움
- **고객 경험의 한계**: 실시간 객실 가용성 확인, 간편한 예약 프로세스 제공이 어려움
- **운영 통계의 부재**: 매출, 예약률, 객실 이용률 등의 실시간 통계 파악이 어려움

이러한 문제점을 해결하기 위해 **HotelBooker**는 웹 기반 통합 예약 관리 시스템을 구축하여 호텔 운영의 효율성을 극대화하고 고객 만족도를 향상시키는 것을 목표로 합니다.

### 프로젝트 목적

1. **운영 효율성 향상**: 예약부터 체크인/체크아웃까지 모든 프로세스를 디지털화하여 처리 시간 단축
2. **고객 만족도 제고**: 직관적인 인터페이스와 실시간 정보 제공으로 고객 경험 개선
3. **데이터 기반 의사결정**: 실시간 통계 및 분석 기능을 통한 데이터 기반 운영 의사결정 지원
4. **법적 요구사항 준수**: 결제 내역 등 법적 증빙 자료의 안전한 보존 및 관리

### 프로젝트 범위

**포함 사항**:
- 사용자 인증 및 계정 관리
- 객실 조회 및 예약 시스템
- 결제 처리 및 관리
- 리뷰 및 평점 시스템
- 공지사항 관리
- 관리자 대시보드 및 통계 분석
- 객실 상태 관리 (청소, 보수)

**제외 사항** (향후 확장 가능):
- 실제 결제 게이트웨이 연동 (현재는 시뮬레이션)
- 모바일 앱 (웹 반응형으로 대체)
- 다국어 지원 (초기 버전은 한국어만)
- 실시간 채팅 상담

---

## 핵심 목표

### 1. 사용자 경험 최적화
- **직관적인 객실 조회**: 날짜 기반 필터링, 실시간 가용성 확인
- **간편한 예약 프로세스**: 3단계 이내 예약 완료 (객실 선택 → 정보 입력 → 결제)
- **투명한 정보 제공**: 객실 상세 정보, 리뷰, 평점을 통한 신뢰성 확보
- **편리한 예약 관리**: 마이페이지에서 예약 내역, 취소, 리뷰 작성 등 원스톱 관리

### 2. 운영 효율성 향상
- **실시간 대시보드**: 오늘의 체크인/체크아웃, 객실 상태, 예약 현황을 한눈에 파악
- **자동화된 상태 관리**: 체크아웃 시 자동으로 객실 상태를 DIRTY로 변경하여 청소 작업 효율화
- **체계적인 예약 관리**: 예약 상태 추적, 필터링, 검색 기능으로 예약 관리 시간 단축
- **통계 및 분석**: 월별/연도별 매출, 예약률, 객실 이용률 분석을 통한 운영 최적화

### 3. 데이터 무결성 보장
- **예약 중복 방지**: 날짜 범위 기반 중복 예약 차단으로 이중 예약 방지
- **법적 증빙 자료 보존**: 결제 내역은 절대 삭제 불가로 설정하여 회계 및 세무 대응
- **과거 데이터 보존**: 예약 내역, 리뷰 등 과거 데이터 보존으로 통계 및 분석 기반 마련
- **트랜잭션 무결성**: 데이터베이스 트랜잭션을 통한 일관성 보장

### 4. 확장성 및 유지보수성
- **모듈화된 아키텍처**: 각 기능을 독립적인 모듈로 분리하여 유지보수 용이
- **표준 기술 스택**: 널리 사용되는 기술 스택으로 개발자 온보딩 및 유지보수 용이
- **API 기반 설계**: RESTful API 설계로 향후 모바일 앱, 외부 시스템 연동 용이

---

## 주요 기능 모듈

### 👤 사용자 모듈 (User Module)

#### 회원가입 및 인증
- **회원가입 프로세스**:
  1. 아이디, 비밀번호, 이메일, 닉네임 입력
  2. 이메일 인증 코드 발송 및 검증
  3. 회원가입 완료 및 자동 로그인
- **로그인 시스템**:
  - JWT(JSON Web Token) 기반 인증
  - 토큰 만료 시간: 24시간 (향후 리프레시 토큰 도입 예정)
  - 로그인 상태 유지 기능
- **권한 관리**:
  - `USER`: 일반 사용자 권한
  - `ADMIN`: 관리자 권한 (객실 관리, 예약 관리, 통계 조회 등)

#### 계정 복구
- **아이디 찾기**:
  1. 이메일 입력
  2. 이메일 인증 코드 발송
  3. 인증 완료 시 아이디 안내
- **비밀번호 찾기**:
  1. 아이디 및 이메일 입력
  2. 이메일 인증 코드 발송
  3. 인증 완료 시 임시 비밀번호 발급
  4. 로그인 후 비밀번호 변경 권장

#### 프로필 관리
- **개인정보 수정**: 닉네임, 이메일 변경
- **비밀번호 변경**: 현재 비밀번호 확인 후 변경
- **예약 내역 조회**: 내가 예약한 모든 예약 내역 확인
- **리뷰 관리**: 작성한 리뷰 목록 및 수정/삭제

---

### 🏠 객실 모듈 (Room Module)

#### 객실 조회 및 필터링
- **기본 조회**: 전체 객실 목록 조회
- **날짜 기반 필터링**:
  - 체크인/체크아웃 날짜 선택
  - 선택한 날짜에 예약 가능한 객실만 표시
  - 중복 예약 방지를 위한 실시간 가용성 확인
- **타입별 필터링**: 싱글, 더블, 트윈, 스위트 등
- **뷰별 필터링**: 오션뷰, 마운틴뷰, 시티뷰 등
- **정렬 기능**: 가격순, 평점순, 인기순

#### 객실 상세 정보
- **기본 정보**: 객실명, 타입, 수용 인원, 가격
- **상세 설명**: 객실 특징, 편의시설, 뷰 정보
- **이미지 갤러리**: 객실 사진 (향후 다중 이미지 지원 예정)
- **평점 및 리뷰**: 객실별 평균 평점, 리뷰 목록
- **예약 가능 여부**: 실시간 예약 가능 상태 표시

#### 객실 상태 관리 (관리자 전용)
- **활성화/비활성화**: `available` 플래그로 예약 가능 여부 제어
- **청소 상태 관리**: CLEAN, DIRTY, MAINTENANCE 상태 변경
- **상태 변경 이력**: 상태 변경 시간 추적 (`statusUpdatedAt`)

---

### 📅 예약 모듈 (Booking Module)

#### 예약 생성 프로세스
1. **객실 선택**: 객실 상세 페이지에서 "예약하기" 버튼 클릭
2. **예약 정보 입력**:
   - 체크인/체크아웃 날짜 (읽기 전용, 객실 선택 시 전달)
   - 인원수 선택 (객실 수용 인원 이내)
   - 특별 요청사항 입력 (선택사항)
3. **금액 확인**: 객실 가격 × 숙박 일수 자동 계산
4. **결제 방법 선택**: 카드, 계좌이체, 현금
5. **예약 생성**: 중복 예약 체크 후 예약 생성 및 결제 처리

#### 예약 중복 방지 로직
- **날짜 범위 겹침 검사**: 
  - 조건: `(checkInDate_A < checkOutDate_B) AND (checkOutDate_B > checkInDate_A)`
  - 취소된 예약(`CANCELLED`)은 제외
- **객실 활성화 여부 확인**: `available = false`인 객실은 예약 불가
- **과거 날짜 예약 방지**: 체크인 날짜는 오늘 이후만 가능

#### 예약 상태 관리
- **예약 상태 흐름**:
  ```
  CONFIRMED (예약 확정)
      ↓ [체크인 처리]
  CHECKED_IN (투숙 중)
      ↓ [체크아웃 처리]
  CHECKED_OUT (체크아웃 완료)
  
  또는
  
  CONFIRMED
      ↓ [예약 취소]
  CANCELLED (취소됨)
  ```
- **예약 취소**: `CONFIRMED` 상태에서만 취소 가능
- **예약 조회**: 마이페이지에서 내 예약 목록 및 상세 정보 확인

#### 예약 관련 자동화
- **체크아웃 시 자동 처리**: 체크아웃 처리 시 해당 객실 상태를 `DIRTY`로 자동 변경
- **예약 알림**: 향후 이메일/SMS 알림 기능 추가 예정

---

### 💳 결제 모듈 (Payment Module)

#### 결제 방법
- **카드 결제**: 신용카드, 체크카드 (현재는 시뮬레이션)
- **계좌이체**: 은행 계좌 이체 (현재는 시뮬레이션)
- **현금 결제**: 현장 결제 옵션

#### 결제 상태 관리
- **결제 상태 흐름**:
  ```
  PENDING (결제 대기)
      ↓ [결제 처리]
  PAID (결제 완료)
      ↓ [환불 처리]
  REFUNDED (환불 완료)
  
  또는
  
  PENDING
      ↓ [결제 실패]
  FAILED (결제 실패)
  ```
- **결제 정보**: 결제 금액, 결제 방법, 결제 일시, 거래 ID 저장

#### 결제 내역 보존 정책
- **법적 증빙 자료**: 결제 내역은 절대 삭제 불가
- **영구 보존**: 예약 취소 시에도 결제 내역은 보존
- **회계 대응**: 세무 및 회계 감사 대응을 위한 데이터 보존

---

### ⭐ 리뷰 모듈 (Review Module)

#### 리뷰 작성
- **작성 조건**: 예약 완료 후 리뷰 작성 가능
- **리뷰 내용**:
  - 평점: 1-5점 (필수)
  - 제목: 리뷰 제목 (선택)
  - 내용: 상세 리뷰 내용 (선택)
- **리뷰 수정/삭제**: 작성자가 수정 및 삭제 가능

#### 리뷰 관리
- **공개/비공개 설정**: 관리자가 리뷰 공개 여부 제어 가능
- **관리자 답변**: 관리자가 리뷰에 답변 작성 가능
- **리뷰 표시**: 객실 상세 페이지에 평균 평점 및 리뷰 목록 표시

#### 평점 시스템
- **객실별 평균 평점**: 모든 리뷰의 평점을 평균하여 계산
- **평점 분포**: 향후 평점 분포 차트 추가 예정

---

### 📢 공지사항 모듈 (Notice Module)

#### 공지사항 유형
- **공지사항 (NOTICE)**: 일반 공지사항
- **이벤트 (EVENT)**: 이벤트 안내
- **프로모션 (PROMOTION)**: 프로모션 및 할인 정보

#### 공지사항 관리
- **기간 설정**: 시작일/종료일 설정으로 기간별 공지사항 표시
- **중요 공지**: 중요 공지사항은 상단에 고정 표시
- **공개/비공개**: 관리자가 공지사항 공개 여부 제어
- **조회수**: 공지사항 조회수 자동 집계

#### 공지사항 표시
- **홈 화면**: 최근 5개 공지사항 미리보기
- **공지사항 목록**: 전체 공지사항 목록 페이지
- **필터링**: 유형별, 중요도별 필터링 가능

---

### 👨‍💼 관리자 모듈 (Admin Module)

#### 대시보드
- **실시간 통계 카드**:
  - 예약 수 (CONFIRMED + 미래 체크인)
  - 청소 완료 객실 수 (CLEAN)
  - 청소 필요 객실 수 (DIRTY)
  - 보수 중 객실 수 (MAINTENANCE)
  - 오늘 체크인/체크아웃 수
  - 현재 투숙 중 수
- **오늘의 작업 목록**:
  - 오늘 체크인 목록 (예약 ID, 객실명, 고객명, 체크인 버튼)
  - 오늘 체크아웃 목록 (예약 ID, 객실명, 고객명, 체크아웃 버튼)
  - 현재 투숙 중 목록

#### 객실 관리
- **객실 CRUD**: 객실 추가, 수정, 삭제
- **객실 상태 관리**:
  - 활성화/비활성화 (`available` 플래그)
  - 청소 상태 변경 (CLEAN, DIRTY, MAINTENANCE)
- **객실 목록**: 테이블 형태로 모든 객실 정보 표시 및 관리

#### 예약 관리
- **예약 목록 조회**: 전체 예약 목록 조회
- **필터링**: 상태별 (CONFIRMED, CHECKED_IN, CHECKED_OUT, CANCELLED) 필터링
- **예약 상세 정보**: 예약 ID, 고객 정보, 객실 정보, 결제 정보 확인
- **예약 상태 변경**: 체크인/체크아웃 처리
- **예약 검색**: 예약 ID, 고객명, 객실명으로 검색

#### 리뷰 관리
- **리뷰 목록**: 모든 리뷰 목록 조회
- **리뷰 공개/비공개 설정**: 리뷰 공개 여부 제어
- **관리자 답변 작성**: 리뷰에 대한 관리자 답변 작성 및 수정

#### 통계 분석
- **월별 통계**: 월별 예약 수, 매출, 객실 이용률
- **연도별 통계**: 연도별 예약 수, 매출, 객실 이용률
- **객실별 통계**: 객실별 예약 횟수, 평균 평점, 매출
- **그래프 시각화**: 향후 차트 라이브러리를 통한 시각화 추가 예정

#### 공지사항 관리
- **공지사항 CRUD**: 공지사항 작성, 수정, 삭제
- **공지사항 유형 설정**: 공지사항, 이벤트, 프로모션 선택
- **중요 공지 설정**: 중요 공지사항 상단 고정 설정
- **기간 설정**: 시작일/종료일 설정

---

## 비즈니스 로직 핵심

### 예약 중복 방지
같은 객실의 같은 날짜 범위에 중복 예약을 방지합니다.

**조건**:
- 날짜 범위 겹침 체크: `(checkInDate_A < checkOutDate_B) AND (checkOutDate_B > checkInDate_A)`
- 취소된 예약(`CANCELLED`)은 제외

### 객실 상태 관리
객실은 두 가지 독립적인 속성으로 관리됩니다:

1. **`available`** (활성화 여부)
   - `true`: 예약 가능
   - `false`: 비활성화 (리모델링, 장기 보수)

2. **`status`** (청소/보수 상태)
   - `CLEAN`: 청소 완료
   - `DIRTY`: 청소 필요 (체크아웃 시 자동 변경)
   - `MAINTENANCE`: 보수 중

**자동화**:
- 체크아웃 처리 시 → `DIRTY` 상태로 자동 변경
- 청소 완료는 관리자가 수동 처리

### 데이터 보존 정책
실제 호텔 운영을 고려한 데이터 보존 정책:

- **결제 내역**: 절대 삭제 불가 (법적 증빙 자료)
- **예약 내역**: 과거 예약은 보존 (회계/통계 목적)
- **리뷰**: 객실 폐쇄 시에도 보존

---

## 기술 스택 및 아키텍처

### 백엔드 기술 스택

#### Spring Boot 3.x
- **선택 이유**:
  - 엔터프라이즈급 안정성과 검증된 프레임워크
  - 풍부한 생태계와 커뮤니티 지원
  - 자동 설정(Auto Configuration)으로 빠른 개발
  - 내장 서버(Tomcat)로 배포 간소화
- **주요 기능**:
  - RESTful API 개발
  - 의존성 주입(DI) 및 제어 역전(IoC)
  - 트랜잭션 관리
  - 예외 처리 및 에러 핸들링

#### Spring Data JPA
- **선택 이유**:
  - 객체-관계 매핑(ORM)을 통한 생산성 향상
  - 데이터베이스 추상화로 DB 벤더 독립성
  - 자동 쿼리 생성 및 커스텀 쿼리 지원
- **주요 기능**:
  - 엔티티 매핑 및 관계 설정
  - Repository 패턴 구현
  - 트랜잭션 관리

#### Spring Security
- **선택 이유**:
  - 강력한 보안 프레임워크
  - JWT 토큰 기반 인증 지원
  - 권한 기반 접근 제어(RBAC)
- **주요 기능**:
  - 사용자 인증 및 인가
  - JWT 토큰 생성 및 검증
  - API 엔드포인트 보안 설정

#### JWT (JSON Web Token)
- **선택 이유**:
  - Stateless 인증으로 서버 확장성 향상
  - 클라이언트 측 토큰 저장으로 서버 부하 감소
  - 토큰에 사용자 정보 포함 가능
- **구현 내용**:
  - 토큰 생성 및 검증 유틸리티
  - 토큰 만료 시간: 24시간
  - 향후 리프레시 토큰 도입 예정

### 프론트엔드 기술 스택

#### React 18.x
- **선택 이유**:
  - 컴포넌트 기반 개발로 재사용성 및 유지보수성 향상
  - 풍부한 생태계와 라이브러리 지원
  - 가상 DOM을 통한 성능 최적화
  - 단방향 데이터 흐름으로 예측 가능한 상태 관리
- **주요 기능**:
  - 함수형 컴포넌트 및 Hooks 사용
  - Context API를 통한 전역 상태 관리
  - React Router를 통한 라우팅

#### Vite
- **선택 이유**:
  - 빠른 개발 서버 시작 시간
  - Hot Module Replacement(HMR)로 즉각적인 변경사항 반영
  - ES 모듈 기반 빌드로 빠른 빌드 속도
  - Create React App 대비 우수한 성능
- **주요 기능**:
  - 개발 서버 실행
  - 프로덕션 빌드 최적화
  - 코드 스플리팅 및 트리 쉐이킹

#### Tailwind CSS
- **선택 이유**:
  - 유틸리티 클래스 기반으로 빠른 스타일링
  - 반응형 디자인 구현 용이
  - 커스터마이징 가능한 디자인 시스템
  - 번들 크기 최적화 (사용하지 않는 CSS 제거)
- **주요 기능**:
  - 반응형 디자인 (모바일, 태블릿, 데스크톱)
  - 다크 모드 지원 (향후 추가 예정)
  - 커스텀 색상 및 테마 설정

#### React Router
- **선택 이유**:
  - 클라이언트 사이드 라우팅
  - 동적 라우팅 지원
  - 보호된 라우트 구현 가능
- **주요 기능**:
  - 페이지 라우팅
  - 쿼리 파라미터 처리
  - 인증 기반 라우트 보호

### 데이터베이스

#### PostgreSQL
- **선택 이유**:
  - 강력한 관계형 데이터베이스
  - ACID 트랜잭션 보장
  - 복잡한 쿼리 및 집계 함수 지원
  - 향후 날짜 범위 제약조건(EXCLUDE) 지원 가능
- **주요 기능**:
  - 관계형 데이터 모델링
  - 인덱스 최적화
  - 트랜잭션 관리
  - 향후 EXCLUDE 제약조건을 통한 중복 예약 방지

### 개발 도구

#### 빌드 도구
- **Gradle**: Java 프로젝트 빌드 및 의존성 관리
- **npm/yarn**: Node.js 패키지 관리

#### 버전 관리
- **Git**: 소스 코드 버전 관리
- **GitHub**: 코드 저장소 및 협업

#### API 문서화
- **Swagger/OpenAPI**: RESTful API 문서 자동 생성

### 아키텍처 패턴

#### 백엔드 아키텍처
- **레이어드 아키텍처**:
  ```
  Controller Layer (API 엔드포인트)
      ↓
  Service Layer (비즈니스 로직)
      ↓
  Repository Layer (데이터 접근)
      ↓
  Database (PostgreSQL)
  ```
- **DTO 패턴**: 엔티티와 API 응답/요청 객체 분리
- **예외 처리**: 전역 예외 핸들러를 통한 일관된 에러 응답

#### 프론트엔드 아키텍처
- **컴포넌트 기반 아키텍처**:
  ```
  Pages (페이지 컴포넌트)
      ↓
  Components (재사용 가능한 컴포넌트)
      ↓
  Context (전역 상태 관리)
      ↓
  Services (API 호출)
  ```
- **관심사 분리**: UI 컴포넌트와 비즈니스 로직 분리
- **상태 관리**: Context API를 통한 전역 상태 관리

---

## 사용자 시나리오

### 일반 사용자 시나리오

#### 시나리오 1: 신규 회원 예약 프로세스
1. **회원가입**
   - 홈페이지 접속 → 회원가입 버튼 클릭
   - 아이디, 비밀번호, 이메일, 닉네임 입력
   - 이메일 인증 코드 발송 및 입력
   - 회원가입 완료 및 자동 로그인

2. **객실 조회**
   - 홈페이지 또는 객실 메뉴 클릭
   - 체크인/체크아웃 날짜 선택
   - 예약 가능한 객실 목록 확인
   - 객실 타입, 뷰, 가격 필터링 (선택)

3. **객실 선택 및 예약**
   - 관심 있는 객실 클릭하여 상세 정보 확인
   - 리뷰 및 평점 확인
   - "예약하기" 버튼 클릭
   - 예약 정보 입력 (인원수, 특별 요청사항)
   - 총 금액 확인

4. **결제 처리**
   - 결제 방법 선택 (카드/계좌이체/현금)
   - 결제 정보 입력 (시뮬레이션)
   - 예약 완료 확인

5. **예약 확인 및 관리**
   - 마이페이지에서 예약 내역 확인
   - 예약 상세 정보 확인
   - 예약 취소 (필요 시, CONFIRMED 상태에서만 가능)

6. **체크인 후 리뷰 작성**
   - 체크인 완료 후 숙박 경험
   - 마이페이지에서 리뷰 작성
   - 평점 및 리뷰 내용 작성
   - 리뷰 제출

#### 시나리오 2: 기존 회원 빠른 예약
1. 로그인 (자동 로그인 상태 유지)
2. 객실 조회 및 선택
3. 예약 정보 입력 및 결제
4. 예약 완료

#### 시나리오 3: 계정 복구
1. **아이디 찾기**
   - 로그인 페이지에서 "아이디 찾기" 클릭
   - 이메일 입력 및 인증 코드 발송
   - 인증 완료 후 아이디 확인

2. **비밀번호 찾기**
   - 로그인 페이지에서 "비밀번호 찾기" 클릭
   - 아이디 및 이메일 입력
   - 이메일 인증 코드 발송 및 입력
   - 임시 비밀번호 발급 및 이메일 수신
   - 임시 비밀번호로 로그인 후 비밀번호 변경

### 관리자 시나리오

#### 시나리오 1: 일일 운영 관리
1. **로그인**
   - 관리자 계정으로 로그인 (ADMIN 권한)

2. **대시보드 현황 확인**
   - 실시간 통계 카드 확인 (예약 수, 객실 상태 등)
   - 오늘 체크인 목록 확인
   - 오늘 체크아웃 목록 확인
   - 현재 투숙 중 목록 확인

3. **체크인 처리**
   - 오늘 체크인 목록에서 고객 선택
   - 체크인 버튼 클릭
   - 예약 상태를 CHECKED_IN으로 변경
   - 대시보드 업데이트

4. **체크아웃 처리**
   - 오늘 체크아웃 목록에서 고객 선택
   - 체크아웃 버튼 클릭
   - 예약 상태를 CHECKED_OUT으로 변경
   - 객실 상태를 DIRTY로 자동 변경
   - 대시보드 업데이트

5. **객실 상태 관리**
   - 청소 완료된 객실 선택
   - 상태를 CLEAN으로 변경
   - 청소 완료 카운트 업데이트

#### 시나리오 2: 객실 관리
1. **객실 추가**
   - 관리자 대시보드 → 객실 관리
   - "객실 추가" 버튼 클릭
   - 객실 정보 입력 (이름, 타입, 가격, 수용 인원 등)
   - 이미지 업로드
   - 객실 저장

2. **객실 수정**
   - 객실 목록에서 수정할 객실 선택
   - 객실 정보 수정
   - 저장

3. **객실 비활성화**
   - 리모델링 또는 장기 보수 필요 시
   - 객실 상태를 비활성화 (`available = false`)
   - 예약 불가 상태로 변경

#### 시나리오 3: 예약 관리 및 통계 분석
1. **예약 목록 조회**
   - 관리자 대시보드 → 예약 관리
   - 전체 예약 목록 확인
   - 상태별 필터링 (CONFIRMED, CHECKED_IN 등)
   - 예약 검색 (예약 ID, 고객명, 객실명)

2. **예약 상세 정보 확인**
   - 예약 목록에서 예약 선택
   - 예약 상세 정보 확인 (고객 정보, 객실 정보, 결제 정보)

3. **통계 분석**
   - 관리자 대시보드 → 통계
   - 월별 예약 수 및 매출 확인
   - 연도별 통계 분석
   - 객실별 예약 횟수 및 평균 평점 확인

#### 시나리오 4: 리뷰 관리
1. **리뷰 목록 조회**
   - 관리자 대시보드 → 리뷰 관리
   - 전체 리뷰 목록 확인

2. **리뷰 답변 작성**
   - 리뷰 선택
   - 관리자 답변 작성
   - 답변 저장

3. **리뷰 공개/비공개 설정**
   - 부적절한 리뷰 발견 시
   - 리뷰 공개 여부를 비공개로 변경

---

## API 설계 원칙

### RESTful API 설계
- **HTTP 메서드 사용**: GET(조회), POST(생성), PUT(수정), DELETE(삭제)
- **리소스 기반 URL**: `/api/bookings`, `/api/rooms`, `/api/users` 등
- **명확한 엔드포인트**: 동사보다 명사 사용, 계층 구조 명확화
- **일관된 응답 형식**: 성공/실패 응답 형식 통일

### 인증 및 권한
- **JWT 토큰 기반 인증**: 모든 API 요청에 Authorization 헤더 포함
- **권한 기반 접근 제어**: USER/ADMIN 권한에 따른 API 접근 제한
- **토큰 만료 처리**: 토큰 만료 시 401 에러 반환 및 재로그인 유도

### 에러 처리
- **일관된 에러 응답 형식**:
  ```json
  {
    "success": false,
    "message": "에러 메시지",
    "error": "ERROR_CODE"
  }
  ```
- **HTTP 상태 코드 사용**: 200(성공), 400(잘못된 요청), 401(인증 실패), 403(권한 없음), 404(리소스 없음), 500(서버 오류)
- **상세한 에러 메시지**: 개발자와 사용자 모두 이해할 수 있는 명확한 메시지

### API 버전 관리
- **URL 기반 버전 관리**: `/api/v1/bookings` (향후 확장 시)
- **하위 호환성 유지**: 기존 API 변경 시 하위 호환성 고려

---

## 보안 고려사항

### 인증 및 인가
- **비밀번호 암호화**: BCrypt를 통한 비밀번호 해싱
- **JWT 토큰 보안**: 토큰 서명 검증, 만료 시간 설정
- **세션 관리**: 토큰 기반 인증으로 서버 부하 감소
- **권한 검증**: 각 API 엔드포인트에서 권한 검증 수행

### 데이터 보안
- **SQL Injection 방지**: JPA를 통한 파라미터 바인딩
- **XSS 방지**: 입력 데이터 검증 및 이스케이프 처리
- **CSRF 방지**: JWT 토큰 기반 인증으로 CSRF 공격 방지
- **민감 정보 보호**: 비밀번호, 결제 정보 등 민감 정보 암호화

### API 보안
- **Rate Limiting**: 향후 API 호출 제한 기능 추가 예정
- **HTTPS 사용**: 프로덕션 환경에서 HTTPS 필수 사용
- **CORS 설정**: 허용된 도메인에서만 API 호출 가능하도록 설정

### 데이터 보존 및 백업
- **정기 백업**: 데이터베이스 정기 백업 수행
- **결제 내역 보존**: 법적 증빙 자료로 영구 보존
- **감사 로그**: 향후 중요 작업에 대한 감사 로그 기록 예정

---

## 성능 최적화 전략

### 데이터베이스 최적화
- **인덱스 전략**: 자주 조회되는 컬럼에 인덱스 생성
  - `users.email`: UNIQUE 인덱스
  - `bookings.user_id`, `bookings.room_id`: 외래키 인덱스
  - `bookings.check_in_date`, `bookings.check_out_date`: 날짜 범위 조회 최적화
  - `bookings.status`: 상태별 필터링 최적화
- **쿼리 최적화**: N+1 문제 방지를 위한 JOIN FETCH 사용
- **페이징 처리**: 대량 데이터 조회 시 페이징 적용

### 프론트엔드 최적화
- **코드 스플리팅**: 라우트 기반 코드 스플리팅으로 초기 로딩 시간 단축
- **이미지 최적화**: 이미지 압축 및 lazy loading 적용
- **캐싱 전략**: 정적 자원 캐싱, API 응답 캐싱 (향후 추가 예정)
- **번들 크기 최적화**: Tree shaking을 통한 사용하지 않는 코드 제거

### API 최적화
- **응답 데이터 최소화**: 필요한 필드만 포함하는 DTO 사용
- **배치 처리**: 여러 요청을 하나의 요청으로 통합 (향후 추가 예정)
- **캐싱**: 자주 조회되는 데이터 캐싱 (향후 Redis 도입 예정)

---

## 에러 처리 전략

### 백엔드 에러 처리
- **전역 예외 핸들러**: `@ControllerAdvice`를 통한 전역 예외 처리
- **커스텀 예외 클래스**: 비즈니스 로직별 커스텀 예외 정의
- **에러 로깅**: 에러 발생 시 로그 기록 (향후 로깅 시스템 도입 예정)
- **사용자 친화적 메시지**: 기술적 에러를 사용자가 이해할 수 있는 메시지로 변환

### 프론트엔드 에러 처리
- **API 에러 처리**: axios interceptor를 통한 전역 에러 처리
- **사용자 알림**: Toast 메시지 또는 모달을 통한 에러 알림
- **에러 바운더리**: React Error Boundary를 통한 컴포넌트 에러 처리
- **재시도 로직**: 네트워크 에러 시 자동 재시도 (향후 추가 예정)

### 일반적인 에러 시나리오
- **인증 실패**: 토큰 만료, 잘못된 토큰 → 401 에러, 로그인 페이지로 리다이렉트
- **권한 없음**: ADMIN 권한 필요한 작업 → 403 에러, 권한 없음 메시지 표시
- **리소스 없음**: 존재하지 않는 ID 조회 → 404 에러, 적절한 메시지 표시
- **중복 예약**: 같은 날짜 예약 시도 → 400 에러, 중복 예약 안내 메시지
- **서버 오류**: 예상치 못한 에러 → 500 에러, 관리자에게 문의 안내

---

## 테스트 전략

### 백엔드 테스트
- **단위 테스트**: Service 레이어 단위 테스트 (JUnit, Mockito)
- **통합 테스트**: Repository 레이어 통합 테스트 (TestContainers 또는 H2)
- **API 테스트**: Controller 레이어 API 테스트 (MockMvc)
- **테스트 커버리지**: 최소 70% 이상 목표

### 프론트엔드 테스트
- **단위 테스트**: 컴포넌트 단위 테스트 (Jest, React Testing Library)
- **통합 테스트**: 페이지 레벨 통합 테스트
- **E2E 테스트**: 향후 Cypress 또는 Playwright 도입 예정

### 테스트 데이터
- **테스트 데이터베이스**: 개발 환경과 분리된 테스트 데이터베이스 사용
- **Fixture 데이터**: 반복 가능한 테스트를 위한 고정 데이터 사용
- **Mock 데이터**: 외부 API 호출 시 Mock 데이터 사용

---

## 배포 및 운영 전략

### 배포 환경
- **개발 환경**: 로컬 개발 환경
- **스테이징 환경**: 프로덕션 배포 전 테스트 환경 (향후 구축 예정)
- **프로덕션 환경**: 실제 서비스 환경

### 배포 프로세스
1. **코드 커밋**: Git을 통한 코드 버전 관리
2. **자동 빌드**: CI/CD 파이프라인을 통한 자동 빌드 (향후 구축 예정)
3. **테스트 실행**: 자동화된 테스트 실행
4. **배포**: 프로덕션 환경 배포
5. **모니터링**: 배포 후 시스템 모니터링

### 운영 모니터링
- **애플리케이션 로그**: 에러 로그, 접근 로그 수집 및 분석
- **성능 모니터링**: API 응답 시간, 데이터베이스 쿼리 성능 모니터링
- **에러 알림**: 중요 에러 발생 시 알림 시스템 (향후 구축 예정)

### 백업 및 복구
- **데이터베이스 백업**: 정기적인 데이터베이스 백업 수행
- **복구 계획**: 데이터 손실 시 복구 절차 수립
- **재해 복구**: 재해 상황 대비 복구 계획 수립

---

## 향후 개선 사항

### 단기 개선 사항 (1-3개월)
- [ ] **이메일 알림 기능**
  - 예약 확인 이메일 발송
  - 체크인 리마인더 이메일 발송
  - 예약 취소 확인 이메일 발송
- [ ] **객실 이미지 다중 업로드**
  - 객실당 여러 이미지 업로드 지원
  - 이미지 갤러리 슬라이더 구현
- [ ] **예약 캘린더 뷰**
  - 관리자 대시보드에 예약 캘린더 추가
  - 날짜별 예약 현황 시각화
- [ ] **리프레시 토큰 도입**
  - JWT 리프레시 토큰 구현
  - 토큰 자동 갱신 기능
- [ ] **API 문서화 개선**
  - Swagger UI를 통한 상세 API 문서
  - API 사용 예제 추가

### 중기 개선 사항 (3-6개월)
- [ ] **실시간 채팅 상담**
  - 웹소켓을 통한 실시간 채팅
  - 관리자-고객 1:1 상담 기능
- [ ] **쿠폰/할인 시스템**
  - 쿠폰 발행 및 사용 기능
  - 할인 코드 적용 기능
  - 프로모션 관리 기능
- [ ] **포인트 적립 시스템**
  - 예약 시 포인트 적립
  - 포인트 사용 기능
  - 포인트 내역 조회
- [ ] **결제 게이트웨이 연동**
  - 실제 결제 시스템 연동 (PG사)
  - 결제 취소 및 환불 처리
- [ ] **Redis 캐싱 도입**
  - 자주 조회되는 데이터 캐싱
  - 세션 관리 개선
- [ ] **로깅 시스템 구축**
  - ELK 스택 또는 CloudWatch를 통한 로그 수집 및 분석
  - 에러 알림 시스템

### 장기 개선 사항 (6개월 이상)
- [ ] **모바일 앱 개발**
  - React Native를 통한 iOS/Android 앱 개발
  - 푸시 알림 기능
- [ ] **AI 기반 객실 추천**
  - 머신러닝을 통한 개인화된 객실 추천
  - 사용자 선호도 분석
- [ ] **다국어 지원**
  - i18n을 통한 다국어 지원
  - 영어, 일본어, 중국어 등 지원
- [ ] **마이크로서비스 아키텍처 전환**
  - 모놀리식에서 마이크로서비스로 전환
  - 서비스별 독립 배포 및 확장
- [ ] **실시간 대시보드**
  - WebSocket을 통한 실시간 통계 업데이트
  - 실시간 예약 알림
- [ ] **고급 통계 및 분석**
  - 데이터 시각화 라이브러리 도입
  - 예측 분석 기능
  - 리포트 생성 기능

---

## 프로젝트 일정 및 마일스톤

### 1단계: 기본 기능 구현 (4주)
**목표**: 핵심 기능 구현 및 기본 시스템 구축

- **Week 1**: 프로젝트 설정 및 인증 시스템
  - Spring Boot 프로젝트 초기 설정
  - React 프로젝트 초기 설정
  - 데이터베이스 스키마 설계 및 구현
  - 사용자 인증 시스템 (회원가입, 로그인, JWT)
  - 이메일 인증 기능

- **Week 2**: 객실 및 예약 시스템
  - 객실 CRUD 기능
  - 객실 조회 및 필터링
  - 예약 생성 및 중복 방지 로직
  - 예약 조회 및 취소

- **Week 3**: 결제 및 리뷰 시스템
  - 결제 모듈 구현
  - 리뷰 작성 및 조회
  - 관리자 리뷰 답변 기능

- **Week 4**: 프론트엔드 기본 페이지
  - 홈, 로그인, 회원가입 페이지
  - 객실 조회 및 예약 페이지
  - 마이페이지

### 2단계: 관리자 기능 및 통계 (3주)
**목표**: 관리자 대시보드 및 운영 기능 구현

- **Week 5**: 관리자 대시보드
  - 대시보드 레이아웃
  - 실시간 통계 카드
  - 오늘 체크인/체크아웃 목록

- **Week 6**: 관리자 기능
  - 객실 관리 (CRUD, 상태 관리)
  - 예약 관리 (체크인/체크아웃)
  - 리뷰 관리

- **Week 7**: 통계 및 분석
  - 월별/연도별 통계
  - 객실별 통계
  - 공지사항 관리

### 3단계: 최적화 및 개선 (2주)
**목표**: 성능 최적화 및 사용자 경험 개선

- **Week 8**: 성능 최적화
  - 데이터베이스 쿼리 최적화
  - 인덱스 추가
  - 프론트엔드 번들 최적화
  - 이미지 최적화

- **Week 9**: 사용자 경험 개선
  - UI/UX 개선
  - 반응형 디자인 완성
  - 에러 처리 개선
  - 로딩 상태 및 피드백 개선

### 4단계: 테스트 및 배포 (2주)
**목표**: 테스트 및 프로덕션 배포

- **Week 10**: 테스트
  - 단위 테스트 작성
  - 통합 테스트 작성
  - E2E 테스트 (선택)
  - 버그 수정

- **Week 11**: 배포 및 문서화
  - 프로덕션 환경 설정
  - 배포 자동화 설정
  - API 문서화
  - 사용자 매뉴얼 작성

---

## 성공 지표 (KPI)

### 사용자 지표
- **회원가입 수**: 월별 신규 회원 수
- **예약 전환율**: 객실 조회 대비 예약 완료 비율
- **사용자 만족도**: 리뷰 평균 평점
- **재방문율**: 기존 회원의 재예약 비율

### 운영 지표
- **예약 처리 시간**: 예약 생성부터 완료까지 소요 시간
- **체크인/체크아웃 처리 시간**: 관리자의 체크인/체크아웃 처리 시간
- **객실 이용률**: 객실별 예약률
- **매출**: 월별/연도별 총 매출

### 기술 지표
- **API 응답 시간**: 평균 API 응답 시간 (목표: 200ms 이하)
- **시스템 가동률**: 시스템 가동 시간 비율 (목표: 99.9% 이상)
- **에러율**: API 에러 발생 비율 (목표: 1% 이하)
- **페이지 로딩 시간**: 평균 페이지 로딩 시간 (목표: 2초 이하)

---

## 리스크 관리

### 기술적 리스크
- **동시 예약 문제**: 동시에 같은 객실을 예약하는 경우
  - **대응**: 비관적 락 또는 DB 제약조건 도입
- **성능 저하**: 사용자 증가에 따른 성능 저하
  - **대응**: 캐싱 도입, 데이터베이스 최적화, 수평 확장
- **데이터 손실**: 데이터베이스 오류로 인한 데이터 손실
  - **대응**: 정기 백업, 복구 계획 수립

### 비즈니스 리스크
- **예약 취소 증가**: 고객의 예약 취소 증가
  - **대응**: 취소 정책 명확화, 취소 수수료 도입 검토
- **부정 사용**: 부정 예약 또는 리뷰 조작
  - **대응**: 사용자 검증 강화, 리뷰 필터링 시스템

### 운영 리스크
- **서버 다운타임**: 서버 장애로 인한 서비스 중단
  - **대응**: 모니터링 시스템 구축, 자동 복구 시스템
- **보안 침해**: 해킹 또는 데이터 유출
  - **대응**: 보안 강화, 정기 보안 점검, 침해 대응 계획

---

## 팀 구성 및 역할 (참고)

### 개발팀 구성 (예시)
- **백엔드 개발자**: Spring Boot API 개발, 데이터베이스 설계
- **프론트엔드 개발자**: React UI 개발, 사용자 경험 최적화
- **풀스택 개발자**: 전체 시스템 통합 및 배포
- **QA 엔지니어**: 테스트 계획 수립 및 테스트 수행 (선택)

### 역할 및 책임
- **프로젝트 매니저**: 프로젝트 일정 관리, 리스크 관리
- **기술 리더**: 기술 스택 결정, 아키텍처 설계
- **개발자**: 기능 개발, 코드 리뷰, 문서화

---

## 참고 문서

- [화면 구조 문서](./02_화면구조.md): 전체 화면 구성 및 페이지별 상세 구조
- [데이터베이스 설계 문서](./03_데이터베이스.md): ERD, 테이블 구조, 관계 설정
- [시나리오 문서](./04_시나리오_예약_룸.md): 예약 및 객실 관리 상세 시나리오

---

## 용어 정의

### 예약 관련 용어
- **체크인 (Check-in)**: 고객이 호텔에 도착하여 객실에 입실하는 것
- **체크아웃 (Check-out)**: 고객이 호텔을 떠나며 객실에서 퇴실하는 것
- **예약 확정 (CONFIRMED)**: 예약이 생성되어 결제가 완료된 상태
- **투숙 중 (CHECKED_IN)**: 고객이 체크인하여 현재 객실에 머물고 있는 상태
- **체크아웃 완료 (CHECKED_OUT)**: 고객이 체크아웃하여 숙박이 완료된 상태
- **예약 취소 (CANCELLED)**: 예약이 취소된 상태

### 객실 관련 용어
- **객실 활성화 (available)**: 객실이 예약 가능한 상태인지 여부
- **청소 완료 (CLEAN)**: 객실이 청소되어 예약 가능한 상태
- **청소 필요 (DIRTY)**: 객실이 청소가 필요한 상태 (체크아웃 후 자동 변경)
- **보수 중 (MAINTENANCE)**: 객실이 보수 작업 중인 상태

### 결제 관련 용어
- **결제 대기 (PENDING)**: 결제가 아직 처리되지 않은 상태
- **결제 완료 (PAID)**: 결제가 성공적으로 완료된 상태
- **결제 실패 (FAILED)**: 결제가 실패한 상태
- **환불 완료 (REFUNDED)**: 환불이 완료된 상태

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 1.0.0 | 2025-01 | 초안 작성 | - |
| 1.1.0 | 2025-01 | 상세 기획서로 확장 | - |

---

**작성일**: 2025년 1월  
**최종 수정일**: 2025년 1월  
**버전**: 1.1.0  
**문서 상태**: 초안

