<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::content}, ~{})}">
<body>
    <div th:fragment="content">
        <h2>예약 내역</h2>
        
        <div th:if="${bookings != null && !bookings.isEmpty()}">
            <div class="bookings-list">
                <div th:each="booking : ${bookings}" class="booking-card">
                    <div class="booking-info">
                        <h3 th:text="${booking.room.roomName}"></h3>
                        <p><strong>체크인:</strong> <span th:text="${#temporals.format(booking.checkInDate, 'yyyy-MM-dd')}"></span></p>
                        <p><strong>체크아웃:</strong> <span th:text="${#temporals.format(booking.checkOutDate, 'yyyy-MM-dd')}"></span></p>
                        <p><strong>인원:</strong> <span th:text="${booking.numGuests}"></span>명</p>
                        <p><strong>총 가격:</strong> <span th:text="'₩' + ${#numbers.formatDecimal(booking.totalPrice, 0, 'COMMA', 0, 'POINT')}"></span></p>
                        <p><strong>상태:</strong> <span th:text="${booking.status}"></span></p>
                    </div>
                    <div class="booking-actions">
                        <a th:if="${booking.status.name() == 'CONFIRMED'}" 
                           th:href="@{/customer/bookings/{id}/review(id=${booking.bookingId})}" 
                           class="btn btn-secondary">리뷰 작성</a>
                        <form th:if="${booking.status.name() == 'PENDING' || booking.status.name() == 'CONFIRMED'}" 
                              th:action="@{/customer/bookings/{id}/cancel(id=${booking.bookingId})}" 
                              method="post" style="display:inline;">
                            <button type="submit" class="btn btn-danger">취소</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div th:if="${bookings == null || bookings.isEmpty()}">
            <p>예약 내역이 없습니다.</p>
        </div>
    </div>
</body>
</html>

